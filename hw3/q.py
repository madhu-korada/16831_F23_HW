#! /bin/python3

import numpy as np


if __name__=='__main__':
    dqn_data_test1 = [
        -208.63909912109375,
        -176.00331115722656,
        -168.97479248046875,
        -163.435302734375,
        -132.90365600585938,
        -102.94847869873047,
        -77.10482788085938,
        -72.38034057617188,
        -57.2120475769043,
        -44.66194534301758,
        -14.932814598083496,
        -6.410329341888428,
        10.519196510314941,
        30.222257614135742,
        49.618309020996094,
        63.6443977355957,
        65.38872528076172,
        85.20623779296875,
        93.29173278808594,
        93.29169464111328,
        95.02395629882812,
        93.12950134277344,
        92.70097351074219,
        100.11474609375,
        104.79706573486328,
        115.56391906738281,
        129.39149475097656,
        145.97763061523438,
        144.13455200195312,
        134.2410125732422
    ]



    dqn_data_test2 = [
        -173.79835510253906,
        -170.3721466064453,
        -165.0827178955078,
        -157.7803955078125,
        -143.00643920898438,
        -142.18341064453125,
        -136.5468292236328,
        -127.00189971923828,
        -112.72380065917969,
        -89.49978637695312,
        -58.475379943847656,
        -21.458770751953125,
        2.410156011581421,
        41.87350082397461,
        56.930519104003906,
        47.854366302490234,
        65.08049011230469,
        75.1682357788086,
        77.53028106689453,
        101.96538543701172,
        108.9697265625,
        100.109619140625,
        97.47860717773438,
        102.2759780883789,
        92.11508178710938,
        104.83716583251953,
        119.74205780029297,
        116.46424865722656,
        110.97921752929688,
        102.80799865722656
    ]

    dqn_data_test3 = [
        -215.40489196777344,
        -186.7707977294922,
        -177.1336669921875,
        -172.64520263671875,
        -161.1896514892578,
        -149.21661376953125,
        -122.42457580566406,
        -104.02287292480469,
        -71.91542053222656,
        -64.2892074584961,
        -33.374046325683594,
        -8.567974090576172,
        9.337244987487793,
        22.471088409423828,
        22.506860733032227,
        46.729095458984375,
        50.98488235473633,
        71.5716781616211,
        85.29240417480469,
        76.6163330078125,
        65.426025390625,
        77.78123474121094,
        70.57782745361328,
        75.86612701416016,
        77.14569854736328,
        79.00194549560547,
        81.08096313476562,
        113.84223937988281,
        120.75442504882812,
        135.485107421875
    ]

    ddqn_data_test1 = [
        -179.78070068359375, 
        -168.39308166503906, 
        -162.66903686523438, 
        -156.08810424804688, 
        -144.20626831054688, 
        -112.13549041748047, 
        -82.08638763427734, 
        -66.3263931274414, 
        -44.53916931152344, 
        -22.21661376953125, 
        4.699474334716797, 
        8.273575782775879, 
        16.475664138793945, 
        39.87866973876953, 
        62.57263946533203, 
        70.4356460571289, 
        78.9616470336914, 
        90.7756576538086, 
        92.24693298339844, 
        85.4094009399414, 
        80.19014739990234, 
        80.51625061035156, 
        83.08914184570312, 
        86.77734375, 
        89.1858901977539, 
        96.96470642089844, 
        103.57443237304688, 
        104.70794677734375, 
        111.71304321289062, 
        111.24172973632812
    ]

    ddqn_data_test2 = [
        -235.6571807861328, 
        -207.43145751953125, 
        -201.1370849609375, 
        -177.17527770996094, 
        -160.89976501464844, 
        -151.28854370117188, 
        -142.74574279785156, 
        -124.1100845336914, 
        -110.1391372680664, 
        -104.47158813476562, 
        -87.38724517822266, 
        -64.79840087890625, 
        -38.173152923583984, 
        -13.291333198547363, 
        5.2101287841796875, 
        11.28429889678955, 
        28.287294387817383, 
        46.73762893676758, 
        63.415409088134766, 
        84.4201889038086, 
        92.9635009765625, 
        104.25479888916016, 
        99.93003845214844, 
        108.07398223876953, 
        125.64408874511719, 
        154.02420043945312, 
        151.76934814453125, 
        155.34458923339844, 
        148.12969970703125, 
        141.58154296875
    ]

    ddqn_data_test3 = [
        # -251.56903076171875, 
        # -225.9849853515625, 
        # -214.8324432373047, 
        # -199.3909454345703, 
        # -174.26480102539062, 
        # -156.94102478027344, 
        # -138.30430603027344, 
        # -107.18800354003906, 
        # -79.69731140136719, 
        # -48.20601272583008, 
        # 21.02910804748535, 
        # 53.619930267333984, 
        # 72.85926055908203, 
        # 79.97090148925781, 
        # 54.31151580810547, 
        # 50.02238082885742, 
        # 38.113037109375, 
        # 31.063880920410156, 
        # 22.266489028930664, 
        # 23.266111373901367, 
        # 23.173965454101562, 
        # 23.107969284057617, 
        # 25.95789337158203, 
        # 25.43950843811035, 
        # 40.75851821899414, 
        # 53.26054382324219, 
        # 71.25889587402344, 
        # 91.97657775878906, 
        # 80.91891479492188, 
        # 71.95510864257812
        
        -232.74595642089844, 
        -209.919677734375, 
        -202.56463623046875, 
        -184.7537078857422, 
        -164.42007446289062, 
        -151.87506103515625, 
        -131.74977111816406, 
        -110.6215591430664, 
        -77.86920928955078, 
        -56.427616119384766, 
        -26.496902465820312, 
        -13.502228736877441, 
        8.105382919311523, 
        30.197446823120117, 
        43.629638671875, 
        54.27415466308594, 
        64.04077911376953, 
        72.77300262451172, 
        76.3452377319336, 
        74.16970825195312, 
        61.06092071533203, 
        55.347042083740234, 
        46.740936279296875, 
        62.97607421875, 
        54.5703010559082, 
        82.00904083251953, 
        68.6889877319336, 
        76.629638671875, 
        74.6181411743164, 
        93.6235122680664
    ]

    dqn_data_test1 = np.array(dqn_data_test1)
    dqn_data_test2 = np.array(dqn_data_test2)
    dqn_data_test3 = np.array(dqn_data_test3)

    dqn_data = np.vstack([dqn_data_test1, dqn_data_test2, dqn_data_test3])

    ddqn_data_test1 = np.array(ddqn_data_test1)
    ddqn_data_test2 = np.array(ddqn_data_test2)
    ddqn_data_test3 = np.array(ddqn_data_test3)

    ddqn_data = np.vstack([ddqn_data_test1, ddqn_data_test2, ddqn_data_test3])

    dqn_avg_returns = np.average(dqn_data, axis = 0)
    dqn_std_returns = np.std(dqn_data, axis = 0)

    ddqn_avg_returns = np.average(ddqn_data, axis = 0)
    ddqn_std_returns = np.std(ddqn_data, axis = 0)

    time = np.arange(len(dqn_avg_returns)) * 10000

    # Plot the average returns with std_returns as error bar
    import matplotlib.pyplot as plt
    # plt.plot(time, dqn_avg_returns)
    plt.errorbar(time, dqn_avg_returns, yerr = dqn_std_returns)

    # plt.plot(time, ddqn_avg_returns)
    plt.errorbar(time, ddqn_avg_returns, yerr = dqn_std_returns)
    plt.legend(['DQN', 'DDQN'])
    
    # The x label should be in scientific notation
    plt.ticklabel_format(style='sci', axis='x', scilimits=(0,0))
    plt.xlabel('Time Steps')
    plt.ylabel('Average Returns')
    plt.title('Comparison of Average Returns between DQN and DDQN')
    plt.savefig('plot.png')
